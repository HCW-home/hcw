<header class="header">
  <div class="header-left">
    <div class="page-info">
      <app-typography [variant]="TypographyTypeEnum['h4-bold']" color="var(--slate-800)">
        {{ pageTitle() }}
      </app-typography>
      <app-typography [variant]="TypographyTypeEnum['body-s-regular']" color="var(--slate-500)">
        {{ pageSubtitle() }}
      </app-typography>
    </div>
  </div>

  <div class="header-actions">
    @if (showNewConsultationButton()) {
      <button class="new-consultation-btn" (click)="navigateToNewConsultation()">
        <app-svg src="plus" [svgStyle]="{'width.px': 16, 'height.px': 16, 'color': 'var(--White)'}"></app-svg>
        <span>New Consultation</span>
      </button>
    }

    <app-language-selector></app-language-selector>

    <div class="profile-section" (click)="toggleProfileMenu()">
      <div class="profile-info">
        <app-typography [variant]="TypographyTypeEnum['body-semibold']" color="var(--slate-800)">
          {{ getUserDisplayName() }}
        </app-typography>
      </div>
      <div class="profile-avatar">
        <span>{{ getUserInitials() }}</span>
      </div>
      <app-svg
        src="svg/chevron-down.svg"
        [svgStyle]="{'width.px': 16, 'height.px': 16, 'color': 'var(--slate-400)'}"
        [ngClass]="{'rotated': showProfileMenu()}">
      </app-svg>
    </div>

    @if (showProfileMenu()) {
      <div class="profile-dropdown">
        <div class="dropdown-header">
          <app-typography [variant]="TypographyTypeEnum['body-bold']" color="var(--slate-800)">
            {{ getUserDisplayName() }}
          </app-typography>
          <app-typography [variant]="TypographyTypeEnum['body-s-regular']" color="var(--slate-500)">
            {{ currentUser?.email }}
          </app-typography>
        </div>
        <div class="dropdown-items">
          <button class="dropdown-item" (click)="openProfile()">
            <app-svg src="svg/profile.svg" [svgStyle]="{'width.px': 18, 'height.px': 18, 'color': 'var(--slate-500)'}"></app-svg>
            <app-typography [variant]="TypographyTypeEnum['body-regular']" color="var(--slate-700)">
              My Profile
            </app-typography>
          </button>
          <button class="dropdown-item logout" (click)="onLogout()">
            <app-svg src="svg/log-out.svg" [svgStyle]="{'width.px': 18, 'height.px': 18, 'color': 'var(--rose-500)'}"></app-svg>
            <app-typography [variant]="TypographyTypeEnum['body-medium']" color="var(--rose-500)">
              Sign out
            </app-typography>
          </button>
        </div>
      </div>
    }
  </div>
</header>
