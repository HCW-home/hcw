<div class="sidebar" [class.collapsed]="isCollapsed">
  <div class="sidebar-header">
    <app-svg
      [src]="isCollapsed ? 'svg/logo.svg' : 'svg/logo.svg'"
      [svgStyle]="{'width.px': isCollapsed ? 40 : 160, 'height.px': isCollapsed ? 40 : 60, 'transition': 'all 0.3s ease'}">
    </app-svg>
    <button class="toggle-btn" (click)="toggleSidebar()">
      <app-svg
        [src]="isCollapsed ? 'svg/chevron-right.svg' : 'svg/chevron-left.svg'"
        [svgStyle]="{'width.px': 20, 'height.px': 20, 'color': 'var(--Bluish-Gray-06)'}">
      </app-svg>
    </button>
  </div>

  <div class="sidebar-main">
    @for (menuItem of menuItems; track menuItem.path) {
      <a
        class="menu-item"
        [routerLink]="'/' + RoutePaths.USER + menuItem.path"
        [routerLinkActive]="'active'"
        [title]="isCollapsed ? menuItem.name : ''">
        <div class="menu-item-content">
          <app-svg
            class="menu-icon"
            [src]="'svg/' + menuItem.icon"
            [svgStyle]="{
              'width.px': 24,
              'height.px': 24,
              'color': router.isActive('/' + RoutePaths.USER + menuItem.path, {
                paths: 'exact',
                matrixParams: 'ignored',
                queryParams: 'ignored',
                fragment: 'ignored',
              })
                ? 'var(--Primary-04)'
                : 'var(--Bluish-Gray-06)'
            }">
          </app-svg>
          @if (!isCollapsed) {
            <app-typography
              class="menu-label"
              [variant]="TypographyTypeEnum['body-medium']">
              {{ menuItem.name }}
            </app-typography>
          }
        </div>
      </a>
    }
  </div>

  <div class="sidebar-footer">
    <div class="user-section">
      @if (!isCollapsed && currentUser) {
        <div class="user-info">
          <app-typography
            [variant]="TypographyTypeEnum['body-bold']"
            color="var(--Bluish-Gray-08)">
            {{ getUserDisplayName() }}
          </app-typography>
          <app-typography
            [variant]="TypographyTypeEnum['body-s-regular']"
            color="var(--Bluish-Gray-06)">
            {{ currentUser.email }}
          </app-typography>
        </div>
      }
    </div>
    <app-button
      [leftIcon]="isCollapsed ? 'log-out' : 'log-out'"
      (buttonClick)="onLogOut()"
      [size]="ButtonSizeEnum.small"
      [style]="ButtonStyleEnum.text"
      [state]="ButtonStateEnum.secondary"
      [text]="isCollapsed ? '' : 'Logout'"
      [title]="isCollapsed ? 'Logout' : ''">
    </app-button>
  </div>
</div>
