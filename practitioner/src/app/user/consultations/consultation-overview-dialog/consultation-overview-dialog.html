<div class="consultation-overview-dialog">
  <div mat-dialog-title class="dialog-title">
    <mat-icon>medical_services</mat-icon>
    <h2>Consultation Overview</h2>
    <button mat-icon-button (click)="closeDialog()" class="close-button">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div mat-dialog-content class="dialog-content">
    <mat-card class="consultation-card">
      <mat-card-header>
        <div mat-card-avatar class="consultation-avatar">
          <mat-icon>person</mat-icon>
        </div>
        <mat-card-title>Consultation #{{ consultation.id }}</mat-card-title>
        <mat-card-subtitle>
          <mat-chip [class]="getStatusClass()">{{ getStatusText() }}</mat-chip>
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <div class="consultation-details">
          <div class="detail-row">
            <mat-icon>person</mat-icon>
            <span class="label">Beneficiary:</span>
            <span class="value">{{ consultation.beneficiary?.email || 'Not assigned' }}</span>
          </div>

          <div class="detail-row">
            <mat-icon>group</mat-icon>
            <span class="label">Group:</span>
            <span class="value">{{ consultation.group?.name || 'No group' }}</span>
          </div>

          <div class="detail-row">
            <mat-icon>calendar_today</mat-icon>
            <span class="label">Created:</span>
            <span class="value">{{ formatDate(consultation.created_at) }}</span>
          </div>

          @if (consultation.closed_at) {
            <div class="detail-row">
              <mat-icon>event_available</mat-icon>
              <span class="label">Closed:</span>
              <span class="value">{{ formatDate(consultation.closed_at) }}</span>
            </div>
          }

          @if (consultation.group?.description) {
            <mat-divider></mat-divider>
            <div class="detail-row description">
              <mat-icon>description</mat-icon>
              <span class="label">Description:</span>
              <span class="value">{{ consultation.group.description }}</span>
            </div>
          }
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <div mat-dialog-actions class="dialog-actions">
    <button mat-button (click)="closeDialog()">Cancel</button>
    @if (!consultation.closed_at) {
      <button mat-raised-button color="primary" (click)="joinConsultation()">
        <mat-icon>videocam</mat-icon>
        Join Consultation
      </button>
    }
  </div>
</div>